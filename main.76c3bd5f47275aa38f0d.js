(()=>{"use strict";var n={354:(n,e,t)=>{t.d(e,{A:()=>i});var s=t(942),r=t.n(s),a=t(278),o=t.n(a)()(r());o.push([n.id,".chat-window {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  background-color: var(--background-color);\n  position: relative;\n}\n\n.chat-header {\n  padding: var(--spacing-md);\n  background-color: var(--surface-color);\n  border-bottom: 1px solid var(--border-color);\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-md);\n}\n\n.messages-list {\n  flex: 1;\n  overflow-y: auto;\n  padding: var(--spacing-lg);\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-md);\n  scroll-behavior: smooth;\n}\n\n.message {\n  max-width: 70%;\n  display: flex;\n  animation: fade-in var(--transition-normal);\n}\n\n.message.incoming {\n  align-self: flex-start;\n}\n\n.message.outgoing {\n  align-self: flex-end;\n}\n\n.message-content {\n  background-color: var(--surface-color);\n  padding: var(--spacing-md);\n  border-radius: var(--radius-md);\n  position: relative;\n  box-shadow: var(--shadow-sm);\n}\n\n.message.outgoing .message-content {\n  background-color: var(--primary-color);\n}\n\n.message-text {\n  margin-bottom: var(--spacing-xs);\n  word-break: break-word;\n  white-space: pre-wrap;\n}\n\n.message-time {\n  font-size: 12px;\n  color: var(--text-secondary);\n  align-self: flex-end;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.message.outgoing .message-time {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n.input-container {\n  display: flex;\n  gap: var(--spacing-md);\n  padding: var(--spacing-md);\n  background-color: var(--surface-color);\n  border-top: 1px solid var(--border-color);\n}\n\n.chat-input {\n  flex: 1;\n  background-color: var(--background-color);\n  border: 1px solid var(--border-color);\n  border-radius: var(--radius-md);\n  color: var(--text-primary);\n  font-size: 16px;\n  padding: var(--spacing-sm) var(--spacing-md);\n  outline: none;\n  transition: border-color var(--transition-fast);\n}\n\n.chat-input:focus {\n  border-color: var(--primary-color);\n}\n\n.send-button {\n  background-color: var(--primary-color);\n  border: none;\n  cursor: pointer;\n  padding: var(--spacing-sm) var(--spacing-md);\n  border-radius: var(--radius-md);\n  transition: background-color var(--transition-fast);\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-sm);\n}\n\n.send-button:hover {\n  background-color: var(--primary-dark);\n}\n\n.send-button:disabled {\n  background-color: var(--border-color);\n  cursor: not-allowed;\n}\n\n/* Адаптивность */\n@media (max-width: 768px) {\n  .message {\n    max-width: 85%;\n  }\n\n  .input-container {\n    padding: var(--spacing-sm);\n  }\n}\n","",{version:3,sources:["webpack://./src/css/components/chat.css"],names:[],mappings:"AAAA;EACE,OAAO;EACP,aAAa;EACb,sBAAsB;EACtB,yCAAyC;EACzC,kBAAkB;AACpB;;AAEA;EACE,0BAA0B;EAC1B,sCAAsC;EACtC,4CAA4C;EAC5C,aAAa;EACb,mBAAmB;EACnB,sBAAsB;AACxB;;AAEA;EACE,OAAO;EACP,gBAAgB;EAChB,0BAA0B;EAC1B,aAAa;EACb,sBAAsB;EACtB,sBAAsB;EACtB,uBAAuB;AACzB;;AAEA;EACE,cAAc;EACd,aAAa;EACb,2CAA2C;AAC7C;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE,oBAAoB;AACtB;;AAEA;EACE,sCAAsC;EACtC,0BAA0B;EAC1B,+BAA+B;EAC/B,kBAAkB;EAClB,4BAA4B;AAC9B;;AAEA;EACE,sCAAsC;AACxC;;AAEA;EACE,gCAAgC;EAChC,sBAAsB;EACtB,qBAAqB;AACvB;;AAEA;EACE,eAAe;EACf,4BAA4B;EAC5B,oBAAoB;EACpB,aAAa;EACb,mBAAmB;EACnB,QAAQ;AACV;;AAEA;EACE,+BAA+B;AACjC;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,0BAA0B;EAC1B,sCAAsC;EACtC,yCAAyC;AAC3C;;AAEA;EACE,OAAO;EACP,yCAAyC;EACzC,qCAAqC;EACrC,+BAA+B;EAC/B,0BAA0B;EAC1B,eAAe;EACf,4CAA4C;EAC5C,aAAa;EACb,+CAA+C;AACjD;;AAEA;EACE,kCAAkC;AACpC;;AAEA;EACE,sCAAsC;EACtC,YAAY;EACZ,eAAe;EACf,4CAA4C;EAC5C,+BAA+B;EAC/B,mDAAmD;EACnD,aAAa;EACb,mBAAmB;EACnB,sBAAsB;AACxB;;AAEA;EACE,qCAAqC;AACvC;;AAEA;EACE,qCAAqC;EACrC,mBAAmB;AACrB;;AAEA,iBAAiB;AACjB;EACE;IACE,cAAc;EAChB;;EAEA;IACE,0BAA0B;EAC5B;AACF",sourcesContent:[".chat-window {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  background-color: var(--background-color);\n  position: relative;\n}\n\n.chat-header {\n  padding: var(--spacing-md);\n  background-color: var(--surface-color);\n  border-bottom: 1px solid var(--border-color);\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-md);\n}\n\n.messages-list {\n  flex: 1;\n  overflow-y: auto;\n  padding: var(--spacing-lg);\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-md);\n  scroll-behavior: smooth;\n}\n\n.message {\n  max-width: 70%;\n  display: flex;\n  animation: fade-in var(--transition-normal);\n}\n\n.message.incoming {\n  align-self: flex-start;\n}\n\n.message.outgoing {\n  align-self: flex-end;\n}\n\n.message-content {\n  background-color: var(--surface-color);\n  padding: var(--spacing-md);\n  border-radius: var(--radius-md);\n  position: relative;\n  box-shadow: var(--shadow-sm);\n}\n\n.message.outgoing .message-content {\n  background-color: var(--primary-color);\n}\n\n.message-text {\n  margin-bottom: var(--spacing-xs);\n  word-break: break-word;\n  white-space: pre-wrap;\n}\n\n.message-time {\n  font-size: 12px;\n  color: var(--text-secondary);\n  align-self: flex-end;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.message.outgoing .message-time {\n  color: rgba(255, 255, 255, 0.7);\n}\n\n.input-container {\n  display: flex;\n  gap: var(--spacing-md);\n  padding: var(--spacing-md);\n  background-color: var(--surface-color);\n  border-top: 1px solid var(--border-color);\n}\n\n.chat-input {\n  flex: 1;\n  background-color: var(--background-color);\n  border: 1px solid var(--border-color);\n  border-radius: var(--radius-md);\n  color: var(--text-primary);\n  font-size: 16px;\n  padding: var(--spacing-sm) var(--spacing-md);\n  outline: none;\n  transition: border-color var(--transition-fast);\n}\n\n.chat-input:focus {\n  border-color: var(--primary-color);\n}\n\n.send-button {\n  background-color: var(--primary-color);\n  border: none;\n  cursor: pointer;\n  padding: var(--spacing-sm) var(--spacing-md);\n  border-radius: var(--radius-md);\n  transition: background-color var(--transition-fast);\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-sm);\n}\n\n.send-button:hover {\n  background-color: var(--primary-dark);\n}\n\n.send-button:disabled {\n  background-color: var(--border-color);\n  cursor: not-allowed;\n}\n\n/* Адаптивность */\n@media (max-width: 768px) {\n  .message {\n    max-width: 85%;\n  }\n\n  .input-container {\n    padding: var(--spacing-sm);\n  }\n}\n"],sourceRoot:""}]);const i=o},305:(n,e,t)=>{t.d(e,{A:()=>i});var s=t(942),r=t.n(s),a=t(278),o=t.n(a)()(r());o.push([n.id,".login-modal {\n  position: fixed;\n  inset: 0;\n  background-color: rgba(0, 0, 0, 0.75);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  backdrop-filter: blur(4px);\n  -webkit-backdrop-filter: blur(4px);\n  padding: var(--spacing-md);\n}\n\n.modal-content {\n  background-color: var(--surface-color);\n  padding: var(--spacing-xl);\n  border-radius: var(--radius-lg);\n  width: 100%;\n  max-width: 400px;\n  box-shadow: var(--shadow-lg);\n  animation: modal-in var(--transition-normal);\n}\n\n.modal-header {\n  margin-bottom: var(--spacing-lg);\n  text-align: center;\n}\n\n.modal-header h2 {\n  font-size: 24px;\n  font-weight: 500;\n  color: var(--text-primary);\n}\n\n.nickname-input {\n  width: 100%;\n  padding: var(--spacing-md);\n  background-color: var(--background-color);\n  border: 1px solid var(--border-color);\n  border-radius: var(--radius-md);\n  color: var(--text-primary);\n  font-size: 16px;\n  margin-bottom: var(--spacing-md);\n  transition: border-color var(--transition-fast);\n}\n\n.nickname-input:focus {\n  border-color: var(--primary-color);\n  outline: none;\n}\n\n.error-message {\n  color: var(--error-color);\n  font-size: 14px;\n  margin-bottom: var(--spacing-md);\n  padding: var(--spacing-sm);\n  border-radius: var(--radius-sm);\n  background-color: rgba(242, 139, 130, 0.1);\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-sm);\n}\n\n.login-button {\n  width: 100%;\n  padding: var(--spacing-md);\n  background-color: var(--primary-color);\n  color: white;\n  border: none;\n  border-radius: var(--radius-md);\n  font-size: 16px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: background-color var(--transition-fast);\n}\n\n.login-button:hover {\n  background-color: var(--primary-dark);\n}\n\n.login-button:disabled {\n  background-color: var(--border-color);\n  cursor: not-allowed;\n}\n\n@keyframes modal-in {\n  from {\n    opacity: 0;\n    transform: scale(0.95);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n/* Адаптивность */\n@media (max-width: 480px) {\n  .modal-content {\n    padding: var(--spacing-lg);\n  }\n\n  .modal-header h2 {\n    font-size: 20px;\n  }\n}\n","",{version:3,sources:["webpack://./src/css/components/modal.css"],names:[],mappings:"AAAA;EACE,eAAe;EACf,QAAQ;EACR,qCAAqC;EACrC,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,aAAa;EACb,0BAA0B;EAC1B,kCAAkC;EAClC,0BAA0B;AAC5B;;AAEA;EACE,sCAAsC;EACtC,0BAA0B;EAC1B,+BAA+B;EAC/B,WAAW;EACX,gBAAgB;EAChB,4BAA4B;EAC5B,4CAA4C;AAC9C;;AAEA;EACE,gCAAgC;EAChC,kBAAkB;AACpB;;AAEA;EACE,eAAe;EACf,gBAAgB;EAChB,0BAA0B;AAC5B;;AAEA;EACE,WAAW;EACX,0BAA0B;EAC1B,yCAAyC;EACzC,qCAAqC;EACrC,+BAA+B;EAC/B,0BAA0B;EAC1B,eAAe;EACf,gCAAgC;EAChC,+CAA+C;AACjD;;AAEA;EACE,kCAAkC;EAClC,aAAa;AACf;;AAEA;EACE,yBAAyB;EACzB,eAAe;EACf,gCAAgC;EAChC,0BAA0B;EAC1B,+BAA+B;EAC/B,0CAA0C;EAC1C,aAAa;EACb,mBAAmB;EACnB,sBAAsB;AACxB;;AAEA;EACE,WAAW;EACX,0BAA0B;EAC1B,sCAAsC;EACtC,YAAY;EACZ,YAAY;EACZ,+BAA+B;EAC/B,eAAe;EACf,gBAAgB;EAChB,eAAe;EACf,mDAAmD;AACrD;;AAEA;EACE,qCAAqC;AACvC;;AAEA;EACE,qCAAqC;EACrC,mBAAmB;AACrB;;AAEA;EACE;IACE,UAAU;IACV,sBAAsB;EACxB;EACA;IACE,UAAU;IACV,mBAAmB;EACrB;AACF;;AAEA,iBAAiB;AACjB;EACE;IACE,0BAA0B;EAC5B;;EAEA;IACE,eAAe;EACjB;AACF",sourcesContent:[".login-modal {\n  position: fixed;\n  inset: 0;\n  background-color: rgba(0, 0, 0, 0.75);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  backdrop-filter: blur(4px);\n  -webkit-backdrop-filter: blur(4px);\n  padding: var(--spacing-md);\n}\n\n.modal-content {\n  background-color: var(--surface-color);\n  padding: var(--spacing-xl);\n  border-radius: var(--radius-lg);\n  width: 100%;\n  max-width: 400px;\n  box-shadow: var(--shadow-lg);\n  animation: modal-in var(--transition-normal);\n}\n\n.modal-header {\n  margin-bottom: var(--spacing-lg);\n  text-align: center;\n}\n\n.modal-header h2 {\n  font-size: 24px;\n  font-weight: 500;\n  color: var(--text-primary);\n}\n\n.nickname-input {\n  width: 100%;\n  padding: var(--spacing-md);\n  background-color: var(--background-color);\n  border: 1px solid var(--border-color);\n  border-radius: var(--radius-md);\n  color: var(--text-primary);\n  font-size: 16px;\n  margin-bottom: var(--spacing-md);\n  transition: border-color var(--transition-fast);\n}\n\n.nickname-input:focus {\n  border-color: var(--primary-color);\n  outline: none;\n}\n\n.error-message {\n  color: var(--error-color);\n  font-size: 14px;\n  margin-bottom: var(--spacing-md);\n  padding: var(--spacing-sm);\n  border-radius: var(--radius-sm);\n  background-color: rgba(242, 139, 130, 0.1);\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-sm);\n}\n\n.login-button {\n  width: 100%;\n  padding: var(--spacing-md);\n  background-color: var(--primary-color);\n  color: white;\n  border: none;\n  border-radius: var(--radius-md);\n  font-size: 16px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: background-color var(--transition-fast);\n}\n\n.login-button:hover {\n  background-color: var(--primary-dark);\n}\n\n.login-button:disabled {\n  background-color: var(--border-color);\n  cursor: not-allowed;\n}\n\n@keyframes modal-in {\n  from {\n    opacity: 0;\n    transform: scale(0.95);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n/* Адаптивность */\n@media (max-width: 480px) {\n  .modal-content {\n    padding: var(--spacing-lg);\n  }\n\n  .modal-header h2 {\n    font-size: 20px;\n  }\n}\n"],sourceRoot:""}]);const i=o},562:(n,e,t)=>{t.d(e,{A:()=>i});var s=t(942),r=t.n(s),a=t(278),o=t.n(a)()(r());o.push([n.id,".user-list {\n  width: 300px;\n  background-color: var(--surface-color);\n  border-right: 1px solid var(--border-color);\n  display: flex;\n  flex-direction: column;\n}\n\n.user-list-header {\n  padding: var(--spacing-md);\n  border-bottom: 1px solid var(--border-color);\n}\n\n.user-list-title {\n  font-size: 18px;\n  font-weight: 500;\n  color: var(--text-primary);\n}\n\n.users-container {\n  flex: 1;\n  overflow-y: auto;\n  padding: var(--spacing-md);\n}\n\n.user-item {\n  display: flex;\n  align-items: center;\n  padding: var(--spacing-md);\n  border-radius: var(--radius-md);\n  cursor: pointer;\n  transition: background-color var(--transition-fast);\n  margin-bottom: var(--spacing-sm);\n  opacity: 0;\n  animation: fade-in var(--transition-normal) forwards;\n}\n\n.user-item:hover {\n  background-color: rgba(255, 255, 255, 0.05);\n}\n\n.user-item:active {\n  background-color: rgba(255, 255, 255, 0.1);\n}\n\n.user-item:nth-child(1) {\n  animation-delay: 50ms;\n}\n.user-item:nth-child(2) {\n  animation-delay: 100ms;\n}\n.user-item:nth-child(3) {\n  animation-delay: 150ms;\n}\n\n.no-users {\n  padding: var(--spacing-md);\n  color: var(--text-secondary);\n  text-align: center;\n  font-size: 14px;\n}\n\n.user-avatar {\n  width: 48px;\n  height: 48px;\n  border-radius: 50%;\n  margin-right: var(--spacing-md);\n  object-fit: cover;\n}\n\n.user-info {\n  flex: 1;\n  min-width: 0;\n}\n\n.user-nickname {\n  font-weight: 500;\n  margin-bottom: var(--spacing-xs);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.user-status {\n  font-size: 14px;\n  color: var(--text-secondary);\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-xs);\n}\n\n.status-indicator {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background-color: var(--text-secondary);\n}\n\n.user-item.online .status-indicator {\n  background-color: var(--success-color);\n}\n\n/* Адаптивность */\n@media (max-width: 768px) {\n  .user-list {\n    width: 100%;\n    height: 100%;\n    border-right: none;\n    border-bottom: 1px solid var(--border-color);\n  }\n\n  .users-container {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n    gap: var(--spacing-sm);\n  }\n}\n","",{version:3,sources:["webpack://./src/css/components/users.css"],names:[],mappings:"AAAA;EACE,YAAY;EACZ,sCAAsC;EACtC,2CAA2C;EAC3C,aAAa;EACb,sBAAsB;AACxB;;AAEA;EACE,0BAA0B;EAC1B,4CAA4C;AAC9C;;AAEA;EACE,eAAe;EACf,gBAAgB;EAChB,0BAA0B;AAC5B;;AAEA;EACE,OAAO;EACP,gBAAgB;EAChB,0BAA0B;AAC5B;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,0BAA0B;EAC1B,+BAA+B;EAC/B,eAAe;EACf,mDAAmD;EACnD,gCAAgC;EAChC,UAAU;EACV,oDAAoD;AACtD;;AAEA;EACE,2CAA2C;AAC7C;;AAEA;EACE,0CAA0C;AAC5C;;AAEA;EACE,qBAAqB;AACvB;AACA;EACE,sBAAsB;AACxB;AACA;EACE,sBAAsB;AACxB;;AAEA;EACE,0BAA0B;EAC1B,4BAA4B;EAC5B,kBAAkB;EAClB,eAAe;AACjB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,kBAAkB;EAClB,+BAA+B;EAC/B,iBAAiB;AACnB;;AAEA;EACE,OAAO;EACP,YAAY;AACd;;AAEA;EACE,gBAAgB;EAChB,gCAAgC;EAChC,mBAAmB;EACnB,gBAAgB;EAChB,uBAAuB;AACzB;;AAEA;EACE,eAAe;EACf,4BAA4B;EAC5B,aAAa;EACb,mBAAmB;EACnB,sBAAsB;AACxB;;AAEA;EACE,UAAU;EACV,WAAW;EACX,kBAAkB;EAClB,uCAAuC;AACzC;;AAEA;EACE,sCAAsC;AACxC;;AAEA,iBAAiB;AACjB;EACE;IACE,WAAW;IACX,YAAY;IACZ,kBAAkB;IAClB,4CAA4C;EAC9C;;EAEA;IACE,aAAa;IACb,4DAA4D;IAC5D,sBAAsB;EACxB;AACF",sourcesContent:[".user-list {\n  width: 300px;\n  background-color: var(--surface-color);\n  border-right: 1px solid var(--border-color);\n  display: flex;\n  flex-direction: column;\n}\n\n.user-list-header {\n  padding: var(--spacing-md);\n  border-bottom: 1px solid var(--border-color);\n}\n\n.user-list-title {\n  font-size: 18px;\n  font-weight: 500;\n  color: var(--text-primary);\n}\n\n.users-container {\n  flex: 1;\n  overflow-y: auto;\n  padding: var(--spacing-md);\n}\n\n.user-item {\n  display: flex;\n  align-items: center;\n  padding: var(--spacing-md);\n  border-radius: var(--radius-md);\n  cursor: pointer;\n  transition: background-color var(--transition-fast);\n  margin-bottom: var(--spacing-sm);\n  opacity: 0;\n  animation: fade-in var(--transition-normal) forwards;\n}\n\n.user-item:hover {\n  background-color: rgba(255, 255, 255, 0.05);\n}\n\n.user-item:active {\n  background-color: rgba(255, 255, 255, 0.1);\n}\n\n.user-item:nth-child(1) {\n  animation-delay: 50ms;\n}\n.user-item:nth-child(2) {\n  animation-delay: 100ms;\n}\n.user-item:nth-child(3) {\n  animation-delay: 150ms;\n}\n\n.no-users {\n  padding: var(--spacing-md);\n  color: var(--text-secondary);\n  text-align: center;\n  font-size: 14px;\n}\n\n.user-avatar {\n  width: 48px;\n  height: 48px;\n  border-radius: 50%;\n  margin-right: var(--spacing-md);\n  object-fit: cover;\n}\n\n.user-info {\n  flex: 1;\n  min-width: 0;\n}\n\n.user-nickname {\n  font-weight: 500;\n  margin-bottom: var(--spacing-xs);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.user-status {\n  font-size: 14px;\n  color: var(--text-secondary);\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-xs);\n}\n\n.status-indicator {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background-color: var(--text-secondary);\n}\n\n.user-item.online .status-indicator {\n  background-color: var(--success-color);\n}\n\n/* Адаптивность */\n@media (max-width: 768px) {\n  .user-list {\n    width: 100%;\n    height: 100%;\n    border-right: none;\n    border-bottom: 1px solid var(--border-color);\n  }\n\n  .users-container {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n    gap: var(--spacing-sm);\n  }\n}\n"],sourceRoot:""}]);const i=o},364:(n,e,t)=>{t.d(e,{A:()=>u});var s=t(942),r=t.n(s),a=t(278),o=t.n(a),i=t(21),A=t.n(i),c=new URL(t(774),t.b),d=new URL(t(73),t.b),l=o()(r()),m=A()(c),h=A()(d);l.push([n.id,`@font-face {\n  font-family: 'Roboto';\n  src: url(${m}) format('truetype');\n  font-weight: 100 900;\n  font-style: normal;\n  font-display: swap;\n}\n\n@font-face {\n  font-family: 'Roboto';\n  src: url(${h}) format('truetype');\n  font-weight: 100 900;\n  font-style: italic;\n  font-display: swap;\n}\n\n:root {\n  /* Цветовая схема */\n  --primary-color: #1a73e8;\n  --primary-dark: #1557b0;\n  --primary-light: #4285f4;\n  --background-color: #202124;\n  --surface-color: #292a2d;\n  --text-primary: #e8eaed;\n  --text-secondary: #9aa0a6;\n  --border-color: #5f6368;\n  --error-color: #f28b82;\n  --success-color: #81c995;\n  --warning-color: #fdd663;\n\n  /* Тени */\n  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);\n  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.4);\n  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.5);\n\n  /* Скругления */\n  --radius-sm: 4px;\n  --radius-md: 8px;\n  --radius-lg: 16px;\n\n  /* Анимации */\n  --transition-fast: 150ms ease;\n  --transition-normal: 250ms ease;\n  --transition-slow: 350ms ease;\n\n  /* Размеры */\n  --spacing-xs: 4px;\n  --spacing-sm: 8px;\n  --spacing-md: 16px;\n  --spacing-lg: 24px;\n  --spacing-xl: 32px;\n}\n\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nhtml {\n  height: 100%;\n  font-size: 16px;\n}\n\nbody {\n  font-family:\n    'Roboto',\n    system-ui,\n    -apple-system,\n    sans-serif;\n  background-color: var(--background-color);\n  color: var(--text-primary);\n  line-height: 1.5;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  height: 100%;\n}\n\n.chat-app {\n  display: flex;\n  height: 100vh;\n  overflow: hidden;\n}\n\n.hidden {\n  display: none !important;\n}\n\n/* Прелоадер */\n.loader {\n  position: fixed;\n  inset: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background-color: var(--background-color);\n  z-index: 1000;\n  gap: var(--spacing-md);\n}\n\n.loader-spinner {\n  width: 40px;\n  height: 40px;\n  border: 3px solid var(--border-color);\n  border-top-color: var(--primary-color);\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n.loader-text {\n  color: var(--text-secondary);\n  font-size: 14px;\n}\n\n/* Анимации */\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes fade-in {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n/* Утилиты */\n.error-message {\n  color: var(--error-color);\n  font-size: 14px;\n  padding: var(--spacing-sm);\n  border-radius: var(--radius-sm);\n  background-color: rgba(242, 139, 130, 0.1);\n}\n\n.success-message {\n  color: var(--success-color);\n  font-size: 14px;\n  padding: var(--spacing-sm);\n  border-radius: var(--radius-sm);\n  background-color: rgba(129, 201, 149, 0.1);\n}\n\n/* Адаптивность */\n@media (max-width: 768px) {\n  :root {\n    --spacing-lg: 16px;\n    --spacing-xl: 24px;\n  }\n\n  .chat-app {\n    flex-direction: column;\n  }\n}\n`,"",{version:3,sources:["webpack://./src/css/main.css"],names:[],mappings:"AAAA;EACE,qBAAqB;EACrB,+DAAgF;EAChF,oBAAoB;EACpB,kBAAkB;EAClB,kBAAkB;AACpB;;AAEA;EACE,qBAAqB;EACrB,+DAAuF;EACvF,oBAAoB;EACpB,kBAAkB;EAClB,kBAAkB;AACpB;;AAEA;EACE,mBAAmB;EACnB,wBAAwB;EACxB,uBAAuB;EACvB,wBAAwB;EACxB,2BAA2B;EAC3B,wBAAwB;EACxB,uBAAuB;EACvB,yBAAyB;EACzB,uBAAuB;EACvB,sBAAsB;EACtB,wBAAwB;EACxB,wBAAwB;;EAExB,SAAS;EACT,yCAAyC;EACzC,yCAAyC;EACzC,2CAA2C;;EAE3C,eAAe;EACf,gBAAgB;EAChB,gBAAgB;EAChB,iBAAiB;;EAEjB,aAAa;EACb,6BAA6B;EAC7B,+BAA+B;EAC/B,6BAA6B;;EAE7B,YAAY;EACZ,iBAAiB;EACjB,iBAAiB;EACjB,kBAAkB;EAClB,kBAAkB;EAClB,kBAAkB;AACpB;;AAEA;EACE,SAAS;EACT,UAAU;EACV,sBAAsB;AACxB;;AAEA;EACE,YAAY;EACZ,eAAe;AACjB;;AAEA;EACE;;;;cAIY;EACZ,yCAAyC;EACzC,0BAA0B;EAC1B,gBAAgB;EAChB,mCAAmC;EACnC,kCAAkC;EAClC,YAAY;AACd;;AAEA;EACE,aAAa;EACb,aAAa;EACb,gBAAgB;AAClB;;AAEA;EACE,wBAAwB;AAC1B;;AAEA,cAAc;AACd;EACE,eAAe;EACf,QAAQ;EACR,aAAa;EACb,sBAAsB;EACtB,mBAAmB;EACnB,uBAAuB;EACvB,yCAAyC;EACzC,aAAa;EACb,sBAAsB;AACxB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,qCAAqC;EACrC,sCAAsC;EACtC,kBAAkB;EAClB,kCAAkC;AACpC;;AAEA;EACE,4BAA4B;EAC5B,eAAe;AACjB;;AAEA,aAAa;AACb;EACE;IACE,yBAAyB;EAC3B;AACF;;AAEA;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,YAAY;AACZ;EACE,yBAAyB;EACzB,eAAe;EACf,0BAA0B;EAC1B,+BAA+B;EAC/B,0CAA0C;AAC5C;;AAEA;EACE,2BAA2B;EAC3B,eAAe;EACf,0BAA0B;EAC1B,+BAA+B;EAC/B,0CAA0C;AAC5C;;AAEA,iBAAiB;AACjB;EACE;IACE,kBAAkB;IAClB,kBAAkB;EACpB;;EAEA;IACE,sBAAsB;EACxB;AACF",sourcesContent:["@font-face {\n  font-family: 'Roboto';\n  src: url('../assets/fonts/Roboto-VariableFont_wdth,wght.ttf') format('truetype');\n  font-weight: 100 900;\n  font-style: normal;\n  font-display: swap;\n}\n\n@font-face {\n  font-family: 'Roboto';\n  src: url('../assets/fonts/Roboto-Italic-VariableFont_wdth,wght.ttf') format('truetype');\n  font-weight: 100 900;\n  font-style: italic;\n  font-display: swap;\n}\n\n:root {\n  /* Цветовая схема */\n  --primary-color: #1a73e8;\n  --primary-dark: #1557b0;\n  --primary-light: #4285f4;\n  --background-color: #202124;\n  --surface-color: #292a2d;\n  --text-primary: #e8eaed;\n  --text-secondary: #9aa0a6;\n  --border-color: #5f6368;\n  --error-color: #f28b82;\n  --success-color: #81c995;\n  --warning-color: #fdd663;\n\n  /* Тени */\n  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);\n  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.4);\n  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.5);\n\n  /* Скругления */\n  --radius-sm: 4px;\n  --radius-md: 8px;\n  --radius-lg: 16px;\n\n  /* Анимации */\n  --transition-fast: 150ms ease;\n  --transition-normal: 250ms ease;\n  --transition-slow: 350ms ease;\n\n  /* Размеры */\n  --spacing-xs: 4px;\n  --spacing-sm: 8px;\n  --spacing-md: 16px;\n  --spacing-lg: 24px;\n  --spacing-xl: 32px;\n}\n\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nhtml {\n  height: 100%;\n  font-size: 16px;\n}\n\nbody {\n  font-family:\n    'Roboto',\n    system-ui,\n    -apple-system,\n    sans-serif;\n  background-color: var(--background-color);\n  color: var(--text-primary);\n  line-height: 1.5;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  height: 100%;\n}\n\n.chat-app {\n  display: flex;\n  height: 100vh;\n  overflow: hidden;\n}\n\n.hidden {\n  display: none !important;\n}\n\n/* Прелоадер */\n.loader {\n  position: fixed;\n  inset: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background-color: var(--background-color);\n  z-index: 1000;\n  gap: var(--spacing-md);\n}\n\n.loader-spinner {\n  width: 40px;\n  height: 40px;\n  border: 3px solid var(--border-color);\n  border-top-color: var(--primary-color);\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n.loader-text {\n  color: var(--text-secondary);\n  font-size: 14px;\n}\n\n/* Анимации */\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes fade-in {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n/* Утилиты */\n.error-message {\n  color: var(--error-color);\n  font-size: 14px;\n  padding: var(--spacing-sm);\n  border-radius: var(--radius-sm);\n  background-color: rgba(242, 139, 130, 0.1);\n}\n\n.success-message {\n  color: var(--success-color);\n  font-size: 14px;\n  padding: var(--spacing-sm);\n  border-radius: var(--radius-sm);\n  background-color: rgba(129, 201, 149, 0.1);\n}\n\n/* Адаптивность */\n@media (max-width: 768px) {\n  :root {\n    --spacing-lg: 16px;\n    --spacing-xl: 24px;\n  }\n\n  .chat-app {\n    flex-direction: column;\n  }\n}\n"],sourceRoot:""}]);const u=l},278:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map((function(e){var t="",s=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),s&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),s&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t})).join("")},e.i=function(n,t,s,r,a){"string"==typeof n&&(n=[[null,n,void 0]]);var o={};if(s)for(var i=0;i<this.length;i++){var A=this[i][0];null!=A&&(o[A]=!0)}for(var c=0;c<n.length;c++){var d=[].concat(n[c]);s&&o[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),e.push(d))}},e}},21:n=>{n.exports=function(n,e){return e||(e={}),n?(n=String(n.__esModule?n.default:n),/^['"].*['"]$/.test(n)&&(n=n.slice(1,-1)),e.hash&&(n+=e.hash),/["'() \t\n]|(%20)/.test(n)||e.needQuotes?'"'.concat(n.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):n):n}},942:n=>{n.exports=function(n){var e=n[1],t=n[3];if(!t)return e;if("function"==typeof btoa){var s=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),a="/*# ".concat(r," */");return[e].concat([a]).join("\n")}return[e].join("\n")}},292:n=>{var e=[];function t(n){for(var t=-1,s=0;s<e.length;s++)if(e[s].identifier===n){t=s;break}return t}function s(n,s){for(var a={},o=[],i=0;i<n.length;i++){var A=n[i],c=s.base?A[0]+s.base:A[0],d=a[c]||0,l="".concat(c," ").concat(d);a[c]=d+1;var m=t(l),h={css:A[1],media:A[2],sourceMap:A[3],supports:A[4],layer:A[5]};if(-1!==m)e[m].references++,e[m].updater(h);else{var u=r(h,s);s.byIndex=i,e.splice(i,0,{identifier:l,updater:u,references:1})}o.push(l)}return o}function r(n,e){var t=e.domAPI(e);t.update(n);return function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,r){var a=s(n=n||[],r=r||{});return function(n){n=n||[];for(var o=0;o<a.length;o++){var i=t(a[o]);e[i].references--}for(var A=s(n,r),c=0;c<a.length;c++){var d=t(a[c]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}a=A}}},383:n=>{var e={};n.exports=function(n,t){var s=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}},88:n=>{n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},884:(n,e,t)=>{n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},893:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var s="";t.supports&&(s+="@supports (".concat(t.supports,") {")),t.media&&(s+="@media ".concat(t.media," {"));var r=void 0!==t.layer;r&&(s+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),s+=t.css,r&&(s+="}"),t.media&&(s+="}"),t.supports&&(s+="}");var a=t.sourceMap;a&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(s,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}},997:n=>{n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},73:n=>{n.exports="/sse-ws-chat/assets/fonts/Roboto-Italic-VariableFont_wdth,wght.ttf"},774:n=>{n.exports="/sse-ws-chat/assets/fonts/Roboto-VariableFont_wdth,wght.ttf"},236:n=>{n.exports="/sse-ws-chat/assets/img/user-default-avatar.png"}},e={};function t(s){var r=e[s];if(void 0!==r)return r.exports;var a=e[s]={id:s,exports:{}};return n[s](a,a.exports,t),a.exports}t.m=n,t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var s in e)t.o(e,s)&&!t.o(n,s)&&Object.defineProperty(n,s,{enumerable:!0,get:e[s]})},t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),t.b=document.baseURI||self.location.href,t.nc=void 0;var s=t(292),r=t.n(s),a=t(893),o=t.n(a),i=t(383),A=t.n(i),c=t(884),d=t.n(c),l=t(88),m=t.n(l),h=t(997),u=t.n(h),p=t(364),g={};g.styleTagTransform=u(),g.setAttributes=d(),g.insert=A().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=m();r()(p.A,g);p.A&&p.A.locals&&p.A.locals;class C{constructor(){this.events=new Map,this._handleError=this._handleError.bind(this)}on(n,e){if(!n||"string"!=typeof n)throw new Error("Некорректное название события");if("function"!=typeof e)throw new Error("Callback должен быть функцией");return this.events.has(n)||this.events.set(n,new Set),this.events.get(n).add(e),()=>this.off(n,e)}_handleError(n,e,t){console.error(`Ошибка в обработчике события ${n}:`,{error:e.message,callback:t.name||"anonymous",stack:e.stack})}once(n,e){const t=(...s)=>{this.off(n,t),e(...s)};return this.on(n,t)}off(n,e){this.events.has(n)&&(e?this.events.get(n).delete(e):this.events.delete(n))}emit(n,e){this.events.has(n)&&this.events.get(n).forEach((t=>{try{t(e)}catch(e){this._handleError(n,e,t)}}))}clear(){this.events.clear()}}class E extends C{constructor(n){super(),this.url=n.endsWith("/ws")?n:`${n}/ws`,this.isConnected=!1,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectTimeout=1e3,this.pendingMessages=new Map,console.log("🔌 Инициализация WebSocket:",this.url),this.connect()}connect(){try{console.log("📡 Попытка подключения к:",this.url),this.ws=new WebSocket(this.url),this.bindEvents()}catch(n){console.error("❌ Ошибка подключения:",n),this.emit("error",n)}}bindEvents(){this.ws.onopen=()=>{console.log("✅ WebSocket подключен"),this.isConnected=!0,this.reconnectAttempts=0,this.emit("connect"),this.resendPendingMessages()},this.ws.onclose=()=>{console.log("❌ WebSocket отключен"),this.isConnected=!1,this.emit("disconnect"),this.reconnect()},this.ws.onerror=n=>{console.error("🔴 WebSocket ошибка:",n),this.emit("error",n)},this.ws.onmessage=n=>{try{const e=JSON.parse(n.data);console.log("📨 Получено сообщение:",e),e.messageId&&this.pendingMessages.delete(e.messageId),this.emit("message",e),e.type&&this.emit(e.type,e)}catch(n){console.error("❌ Ошибка обработки сообщения:",n),this.emit("error",n)}}}send(n,e={}){if(!this.isConnected)return console.error("❌ Попытка отправки без подключения"),void this.addToPending(n,e);const t=crypto.randomUUID(),s={messageId:t,type:n,...e};console.log("📤 Отправка сообщения:",s),this.ws.send(JSON.stringify(s)),this.addToPending(n,e,t)}addToPending(n,e,t=crypto.randomUUID()){this.pendingMessages.set(t,{type:n,data:e,timestamp:Date.now()})}resendPendingMessages(){for(const[n,e]of this.pendingMessages)this.send(e.type,e.data)}reconnect(){this.reconnectAttempts>=this.maxReconnectAttempts?this.emit("error",new Error("Превышено количество попыток подключения")):(this.reconnectAttempts++,setTimeout((()=>{this.connect()}),this.reconnectTimeout*this.reconnectAttempts))}disconnect(){this.ws&&this.isConnected&&this.ws.close()}}const B={day:"2-digit",month:"2-digit",year:"numeric"},v={hour:"2-digit",minute:"2-digit"},f=n=>{if(!n||isNaN(n))return console.warn("❌ Некорректный timestamp:",n),"";const e=new Date(n);return new Intl.DateTimeFormat("ru-RU",B).format(e)},b=n=>{if(!n||isNaN(n))return console.warn("❌ Некорректный timestamp:",n),"";const e=new Date(n);return new Intl.DateTimeFormat("ru-RU",v).format(e)};class x{static TYPES={TEXT:"message",SYSTEM:"system",STATUS:"status"};static STATUSES={SENDING:"sending",SENT:"sent",DELIVERED:"delivered",READ:"read",ERROR:"error"};constructor({id:n,from:e,text:t,type:s=x.TYPES.TEXT,timestamp:r,status:a=x.STATUSES.SENDING}){if(!t)throw new Error("Текст сообщения обязателен");this.id=n||crypto.randomUUID(),this.from=e,this.text=t,this.type=Object.values(x.TYPES).includes(s)?s:x.TYPES.TEXT,this.timestamp=r||Date.now(),this.status=Object.values(x.STATUSES).includes(a)?a:x.STATUSES.SENDING}static fromJSON(n){if(!n?.text)throw new Error("Некорректные данные сообщения");return new x(n)}static system(n){return new x({id:crypto.randomUUID(),from:"system",text:n,type:x.TYPES.SYSTEM,status:x.STATUSES.SENT})}getFormattedTime(){return b(this.timestamp)}isSystem(){return this.type===x.TYPES.SYSTEM}isError(){return this.status===x.STATUSES.ERROR}toJSON(){return{id:this.id,from:this.from,text:this.text,type:this.type,timestamp:this.timestamp,status:this.status}}}class w{constructor({id:n,participants:e,messages:t=[],unreadCount:s=0}){this.id=n||crypto.randomUUID(),this.participants=new Set(e),this.messages=t.map((n=>x.fromJSON(n))),this.unreadCount=Math.max(0,s),this.lastActivity=this.getLastActivity()}static fromJSON(n){if(!n?.participants?.length)throw new Error("Чат должен иметь участников");return new w(n)}addMessage(n){const e=n instanceof x?n:x.fromJSON(n);return this.messages.push(e),this.lastActivity=Date.now(),e}getFormattedLastActivity(){return f(this.lastActivity)}getLastMessage(){return this.messages[this.messages.length-1]||null}getLastActivity(){const n=this.getLastMessage();return n?n.timestamp:Date.now()}getFormattedLastActivity(){const n=new Date(this.lastActivity);return new Date-n<864e5?n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):n.toLocaleDateString()}markAsRead(n){this.messages.forEach((e=>{e.from!==n&&e.status!==x.STATUSES.READ&&(e.status=x.STATUSES.READ)})),this.unreadCount=0}incrementUnread(){this.unreadCount++}hasParticipant(n){return this.participants.has(n)}toJSON(){return{id:this.id,participants:Array.from(this.participants),messages:this.messages.map((n=>n.toJSON())),unreadCount:this.unreadCount,lastActivity:this.lastActivity}}}class y{static STATUSES={ACTIVE:"active",AWAY:"away",OFFLINE:"offline"};constructor({id:n,nickname:e,isOnline:t=!1,lastActivity:s=Date.now(),avatar:r,status:a}){if(!e)throw new Error("Никнейм обязателен");this.id=n||crypto.randomUUID(),this.nickname=e.trim(),this.isOnline=Boolean(t),this.lastActivity=s,this.avatar=r||this.getDefaultAvatar(this.nickname),this.status=Object.values(y.STATUSES).includes(a)?a:y.STATUSES.ACTIVE}getDefaultAvatar(n){return n?`https://api.dicebear.com/7.x/avataaars/svg?seed=${n}`:new URL(t(236),t.b).href}static fromJSON(n){return new y(n)}getLastActivityTime(){return f(this.lastActivity)}isActive(){return this.status===y.STATUSES.ACTIVE}toJSON(){return{id:this.id,nickname:this.nickname,isOnline:this.isOnline,lastActivity:this.lastActivity,avatar:this.avatar,status:this.status}}}class k extends C{constructor(n){super(),this.ws=n,this.chats=new Map,this.users=new Map,this.currentUser=null,this.pendingMessages=new Map,this.bindEvents()}bindEvents(){this.ws.on("connect",(()=>{this.emit("connect"),this.currentUser&&this.login(this.currentUser.nickname)})),this.ws.on("disconnect",(()=>{this.emit("disconnect")})),this.ws.on("loginSuccess",(n=>{n?.user?(this.currentUser=new y(n.user),this.emit("loginSuccess",this.currentUser)):console.error("❌ Некорректные данные пользователя:",n)})),this.ws.on("loginError",(n=>{this.emit("loginError",n.message)})),this.ws.on("userList",(n=>{this.users.clear(),n.users.forEach((n=>{this.users.set(n.id,new y(n))})),this.emit("userListUpdate",Array.from(this.users.values()))})),this.ws.on("userJoined",(n=>{const e=new y(n.user);this.users.set(e.id,e),this.emit("userJoined",e),this.ws.send("getUserList")})),this.ws.on("userLeft",(n=>{const e=this.users.get(n.userId);e&&(e.isOnline=!1,this.emit("userLeft",e))})),this.ws.on("chatCreated",(n=>{const e=new w(n.chat);this.chats.set(e.id,e),this.emit("chatCreated",e)})),this.ws.on("message",(n=>{console.log("📨 Получено сообщение:",n);const e=this.chats.get(n.chatId);if(e){const t=new x({id:n.messageId,from:n.from,text:n.text,timestamp:n.timestamp,status:"delivered"});e.addMessage(t),this.emit("newMessage",{chat:e,message:t})}})),this.ws.on("error",(n=>{this.emit("error",n)}))}login(n){if(!n?.trim())throw new Error("Никнейм не может быть пустым");this.ws.send("login",{nickname:n.trim()})}logout(){this.ws.send("logout"),this.currentUser=null,this.chats.clear(),this.users.clear()}startChat(n){if(!n)throw new Error("ID пользователя не указан");this.ws.send("startChat",{targetUserId:n})}sendMessage(n,e){if(!n||!e?.trim())throw new Error("Некорректные данные сообщения");const t=crypto.randomUUID(),s=new x({id:t,from:this.currentUser.id,chatId:n,text:e.trim(),timestamp:Date.now(),status:"sending"}),r=this.chats.get(n);r&&(r.addMessage(s),this.emit("newMessage",{chat:r,message:s})),this.pendingMessages.set(t,s),this.ws.send("message",{chatId:n,text:e.trim(),messageId:t,from:this.currentUser.id})}markMessagesAsRead(n){const e=this.chats.get(n);e&&(e.markAsRead(this.currentUser.id),this.ws.send("markAsRead",{chatId:n}))}disconnect(){this.currentUser&&this.logout(),this.ws.disconnect()}}class S{constructor(n){this.onLogin=n,this.element=this.createElements()}createElements(){const n=document.createElement("div");n.className="login-modal hidden",n.innerHTML='\n      <div class="login-content">\n        <h2>Введите имя</h2>\n        <div class="error-message hidden"></div>\n        <input type="text" placeholder="Ваше имя..." maxlength="50">\n        <button>Войти</button>\n      </div>\n    ';const e=n.querySelector("input"),t=n.querySelector("button");return this.errorElement=n.querySelector(".error-message"),t.addEventListener("click",(()=>this.handleLogin(e.value))),e.addEventListener("keypress",(n=>{"Enter"===n.key&&this.handleLogin(e.value)})),n}handleLogin(n){(n=n.trim()).length<2?this.showError("Имя должно содержать минимум 2 символа"):this.onLogin(n)}showError(n){this.errorElement.textContent=n,this.errorElement.classList.remove("hidden")}show(){this.element.classList.remove("hidden"),this.element.querySelector("input").focus()}hide(){this.element.classList.add("hidden")}}class T{constructor(n){this.onUserSelect=n,this.users=new Map,this.element=this.createElements()}createElements(){const n=document.createElement("div");return n.className="user-list hidden",n.innerHTML='\n      <h2 class="chat-header">Пользователи онлайн</h2>\n      <div class="users-container"></div>\n    ',this.usersContainer=n.querySelector(".users-container"),n}updateUsers(n){Array.isArray(n)?(this.users.clear(),this.usersContainer.innerHTML="",0!==n.length?n.forEach((n=>{const e=n instanceof y?n:new y(n);this.users.set(e.id,e);const t=document.createElement("div");t.className="user-item "+(e.isOnline?"online":""),t.innerHTML=`\n        <img class="user-avatar" src="${e.avatar}" alt="${e.nickname}">\n        <div class="user-info">\n          <div class="user-nickname">${e.nickname}</div>\n          <div class="user-status">\n            <span class="status-indicator"></span>\n            ${e.isOnline?"в сети":"не в сети"}\n          </div>\n        </div>\n      `,t.addEventListener("click",(()=>this.onUserSelect(e.id))),this.usersContainer.appendChild(t)})):this.usersContainer.innerHTML='\n        <div class="no-users">\n          Нет доступных пользователей\n        </div>\n      '):console.error("❌ Некорректный формат списка пользователей")}show(){this.element.classList.remove("hidden")}hide(){this.element.classList.add("hidden")}}class U{constructor(n){this.onSendMessage=n,this.currentChat=null,this.currentUser=null,this.userList=null,this.element=this.createElements()}createElements(){const n=document.createElement("div");return n.className="chat-window hidden",n.innerHTML='\n      <div class="chat-header">\n        <h2>Выберите пользователя для начала чата</h2>\n      </div>\n      <div class="messages-list"></div>\n      <div class="input-container">\n        <input type="text" class="chat-input" placeholder="Введите сообщение...">\n        <button class="send-button">\n          <img src="/sse-ws-chat/assets/img/send.svg" alt="Отправить">\n        </button>\n      </div>\n    ',this.messagesList=n.querySelector(".messages-list"),this.input=n.querySelector(".chat-input"),this.sendButton=n.querySelector(".send-button"),this.header=n.querySelector(".chat-header h2"),this.sendButton.addEventListener("click",(()=>this.handleSend())),this.input.addEventListener("keypress",(n=>{"Enter"===n.key&&this.handleSend()})),n}handleSend(){const n=this.input.value.trim();n&&this.onSendMessage&&(this.onSendMessage(n),this.input.value="")}setUserList(n){this.userList=n}setCurrentChat(n,e){this.currentChat=n,this.currentUser=e,this.messagesList.innerHTML="";const t=Array.from(n.participants).find((n=>n!==e.id)),s=this.userList?.users.get(t);this.header.textContent=s?`Чат с ${s.nickname}`:"Чат",this.show(),this.input.disabled=!1,this.sendButton.disabled=!1,this.input.focus(),n.messages.forEach((n=>this.addMessage(n)))}addMessage(n){console.log("📝 Добавление сообщения:",n);const e=n instanceof x?n:new x({id:n.id,from:n.from||this.currentUser.id,text:n.text,timestamp:n.timestamp||Date.now(),status:n.status}),t=document.createElement("div"),s=e.from===this.currentUser?.id;t.className="message "+(s?"outgoing":"incoming"),t.innerHTML=`\n      <div class="message-content">\n        <div class="message-text">${e.text}</div>\n        <div class="message-time">${b(e.timestamp)}</div>\n        ${e.status?`<div class="message-status">${e.status}</div>`:""}\n      </div>\n    `,this.messagesList.appendChild(t),this.scrollToBottom()}scrollToBottom(){this.messagesList.scrollTop=this.messagesList.scrollHeight}show(){this.element.classList.remove("hidden")}hide(){this.element.classList.add("hidden")}}class L{constructor(){const n="wss://sse-ws-chat-4ur5.onrender.com/ws";console.log("🌐 WebSocket URL:",n),this.wsClient=new E(n),this.chatService=new k(this.wsClient),this.init()}init(){this.container=document.createElement("div"),this.container.className="chat-app hidden",this.loginModal=new S(this.handleLogin.bind(this)),this.userList=new T(this.handleUserSelect.bind(this)),this.chatWindow=new U(this.handleSendMessage.bind(this)),this.chatWindow.setUserList(this.userList),document.body.appendChild(this.container),document.body.appendChild(this.loginModal.element),this.container.appendChild(this.userList.element),this.container.appendChild(this.chatWindow.element),this.bindEvents(),this.showLoginModal()}bindEvents(){this.chatService.on("loginSuccess",(n=>{console.log("✅ Успешный вход:",n),this.currentUser=n,this.loginModal.hide(),this.container.classList.remove("hidden"),this.userList.show(),this.chatWindow.show(),this.chatService.ws.send("getUserList")})),this.chatService.on("loginError",(n=>{console.error("❌ Ошибка входа:",n),this.loginModal.showError(n)})),this.chatService.on("userListUpdate",(n=>{if(console.log("👥 Обновление списка пользователей:",n),this.currentUser){const e=n.filter((n=>n.id!==this.currentUser.id));this.userList.updateUsers(e)}})),this.chatService.on("chatCreated",(n=>{console.log("💬 Чат создан:",n),this.chatWindow.setCurrentChat(n,this.currentUser)})),this.chatService.on("newMessage",(n=>{console.log("📨 Новое сообщение:",n),n.chat.id===this.chatWindow.currentChat?.id&&this.chatWindow.addMessage(n.message)})),this.chatService.on("error",(n=>{console.error("❌ Ошибка:",n)}))}showLoginModal(){this.loginModal.show()}handleLogin(n){console.log("🔑 Попытка входа:",n),this.chatService.login(n)}handleUserSelect(n){console.log("👤 Выбран пользователь:",n),this.chatService.startChat(n)}handleSendMessage(n){if(this.chatWindow.currentChat){console.log("📤 Отправка сообщения:",n);try{this.chatService.sendMessage(this.chatWindow.currentChat.id,n)}catch(n){console.error("❌ Ошибка отправки:",n)}}}}var I=t(354),M={};M.styleTagTransform=u(),M.setAttributes=d(),M.insert=A().bind(null,"head"),M.domAPI=o(),M.insertStyleElement=m();r()(I.A,M);I.A&&I.A.locals&&I.A.locals;var D=t(562),z={};z.styleTagTransform=u(),z.setAttributes=d(),z.insert=A().bind(null,"head"),z.domAPI=o(),z.insertStyleElement=m();r()(D.A,z);D.A&&D.A.locals&&D.A.locals;var R=t(305),O={};O.styleTagTransform=u(),O.setAttributes=d(),O.insert=A().bind(null,"head"),O.domAPI=o(),O.insertStyleElement=m();r()(R.A,O);R.A&&R.A.locals&&R.A.locals;let N=null;document.addEventListener("DOMContentLoaded",(()=>{const n=document.getElementById("loader");try{N=new L,n.classList.add("hidden")}catch(e){console.error("Ошибка инициализации приложения:",e),n.innerHTML='\n      <div class="error-message">\n        Произошла ошибка при загрузке приложения. Попробуйте обновить страницу.\n      </div>\n    '}})),window.addEventListener("unhandledrejection",(n=>{console.error("Необработанная ошибка:",n.reason)})),window.addEventListener("beforeunload",(()=>{N?.chatService&&N.chatService.disconnect()})),window.WebSocket||(document.body.innerHTML='\n        <div class="error-message">\n        Ваш браузер не поддерживает WebSocket. Пожалуйста, обновите браузер.\n        </div>\n    ')})();
//# sourceMappingURL=main.76c3bd5f47275aa38f0d.js.map